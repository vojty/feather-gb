"use strict";(self.webpackChunkfeather_gb=self.webpackChunkfeather_gb||[]).push([[72],{3595:(n,e,t)=>{t.d(e,{O_:()=>w,S1:()=>j,Lt:()=>A,n6:()=>S,O7:()=>k,m_:()=>L,h9:()=>P,Dz:()=>C,kF:()=>E,ug:()=>T,pT:()=>B,xL:()=>Z,fY:()=>D,Or:()=>N});var r=t(3013);n=t.hmd(n);const o=new Array(32).fill(void 0);function i(n){return o[n]}o.push(void 0,null,!0,!1);let a=o.length;function c(n){a===o.length&&o.push(o.length+1);const e=a;return a=o[e],o[e]=n,e}function s(n){const e=typeof n;if("number"==e||"boolean"==e||null==n)return`${n}`;if("string"==e)return`"${n}"`;if("symbol"==e){const e=n.description;return null==e?"Symbol":`Symbol(${e})`}if("function"==e){const e=n.name;return"string"==typeof e&&e.length>0?`Function(${e})`:"Function"}if(Array.isArray(n)){const e=n.length;let t="[";e>0&&(t+=s(n[0]));for(let r=1;r<e;r++)t+=", "+s(n[r]);return t+="]",t}const t=/\[object ([^\]]+)\]/.exec(toString.call(n));let r;if(!(t.length>1))return toString.call(n);if(r=t[1],"Object"==r)try{return"Object("+JSON.stringify(n)+")"}catch(n){return"Object"}return n instanceof Error?`${n.name}: ${n.message}\n${n.stack}`:r}let u=0,l=null;function d(){return null!==l&&l.buffer===r.memory.buffer||(l=new Uint8Array(r.memory.buffer)),l}let f=new("undefined"==typeof TextEncoder?(0,n.require)("util").TextEncoder:TextEncoder)("utf-8");const p="function"==typeof f.encodeInto?function(n,e){return f.encodeInto(n,e)}:function(n,e){const t=f.encode(n);return e.set(t),{read:n.length,written:t.length}};function g(n,e,t){if(void 0===t){const t=f.encode(n),r=e(t.length);return d().subarray(r,r+t.length).set(t),u=t.length,r}let r=n.length,o=e(r);const i=d();let a=0;for(;a<r;a++){const e=n.charCodeAt(a);if(e>127)break;i[o+a]=e}if(a!==r){0!==a&&(n=n.slice(a)),o=t(o,r,r=a+3*n.length);const e=d().subarray(o+a,o+r);a+=p(n,e).written}return u=a,o}let x=null;function b(){return null!==x&&x.buffer===r.memory.buffer||(x=new Int32Array(r.memory.buffer)),x}let h=new("undefined"==typeof TextDecoder?(0,n.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});function m(n,e){return h.decode(d().subarray(n,n+e))}function w(){return r.get_audio_buffer_size()>>>0}h.decode();let y=32;function v(n){if(1==y)throw new Error("out of js stack");return o[--y]=n,y}function j(){r.init()}function _(n,e){try{return n.apply(this,e)}catch(n){r.__wbindgen_exn_store(c(n))}}const A=Object.freeze({ArrowDown:0,0:"ArrowDown",ArrowLeft:1,1:"ArrowLeft",ArrowRight:2,2:"ArrowRight",ArrowUp:3,3:"ArrowUp",A:4,4:"A",B:5,5:"B",Start:6,6:"Start",Select:7,7:"Select"});class S{static __wrap(n){const e=Object.create(S.prototype);return e.ptr=n,e}__destroy_into_raw(){const n=this.ptr;return this.ptr=0,n}free(){const n=this.__destroy_into_raw();r.__wbg_webcartridge_free(n)}constructor(n){var e=function(n,e){const t=e(1*n.length);return d().set(n,t/1),u=n.length,t}(n,r.__wbindgen_malloc),t=u,o=r.webcartridge_new(e,t);return S.__wrap(o)}}class k{static __wrap(n){const e=Object.create(k.prototype);return e.ptr=n,e}__destroy_into_raw(){const n=this.ptr;return this.ptr=0,n}free(){const n=this.__destroy_into_raw();r.__wbg_webemulator_free(n)}constructor(n,e){try{!function(n,e){if(!(n instanceof e))throw new Error(`expected instance of ${e.name}`);n.ptr}(n,S);var t=n.ptr;n.ptr=0;var i=r.webemulator_new(t,v(e));return k.__wrap(i)}finally{o[y++]=void 0}}run_frame(){r.webemulator_run_frame(this.ptr)}get_canvas_data_pointer(){return r.webemulator_get_canvas_data_pointer(this.ptr)}on_key_down(n){r.webemulator_on_key_down(this.ptr,n)}on_key_up(n){r.webemulator_on_key_up(this.ptr,n)}set_audio_buffer_callback(n){try{r.webemulator_set_audio_buffer_callback(this.ptr,v(n))}finally{o[y++]=void 0}}}function L(n){return c(i(n))}function P(){return c(new Error)}function C(n,e){var t=g(i(e).stack,r.__wbindgen_malloc,r.__wbindgen_realloc),o=u;b()[n/4+1]=o,b()[n/4+0]=t}function E(n,e){try{console.error(m(n,e))}finally{r.__wbindgen_free(n,e)}}function T(n){!function(n){const e=i(n);(function(n){n<36||(o[n]=a,a=n)})(n)}(n)}function B(n){return c(n)}function Z(){return _((function(n,e,t){return c(i(n).call(i(e),i(t)))}),arguments)}function D(n,e){var t=g(s(i(e)),r.__wbindgen_malloc,r.__wbindgen_realloc),o=u;b()[n/4+1]=o,b()[n/4+0]=t}function N(n,e){throw new Error(m(n,e))}},5493:(n,e,t)=>{const r=t(5204);e._=r.useLocalStorage;var o=t(6331);o.writeStorage,o.deleteFromStorage,r.useLocalStorage},6331:(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class t extends CustomEvent{constructor(n){super(t.eventName,{detail:n})}}t.eventName="onLocalStorageChange",e.LocalStorageChanged=t,e.isTypeOfLocalStorageChanged=function(n){return!!n&&(n instanceof t||n.detail&&n.type===t.eventName)},e.writeStorage=function(n,e){try{localStorage.setItem(n,"object"==typeof e?JSON.stringify(e):`${e}`),window.dispatchEvent(new t({key:n,value:e}))}catch(n){if(n instanceof TypeError&&n.message.includes("circular structure"))throw new TypeError("The object that was given to the writeStorage function has circular references.\nFor more information, check here: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Cyclic_object_value");throw n}},e.deleteFromStorage=function(n){localStorage.removeItem(n),window.dispatchEvent(new t({key:n,value:""}))}},5204:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=t(6331),o=t(9496);function i(n){try{return JSON.parse(n)}catch(e){return n}}e.useLocalStorage=function(n,e){const[t,a]=o.useState(null===localStorage.getItem(n)?e:i(localStorage.getItem(n)));o.useEffect((()=>{a(null===localStorage.getItem(n)?e:i(localStorage.getItem(n)))}),[n]),o.useEffect((()=>{const t=e=>{return t=e,void(r.isTypeOfLocalStorageChanged(t)?t.detail.key===n&&a(t.detail.value):t.key===n&&t.newValue&&a(i(t.newValue)));var t};window.addEventListener(r.LocalStorageChanged.eventName,t),window.addEventListener("storage",t);const o=null===localStorage.getItem(n);return void 0!==e&&o&&r.writeStorage(n,e),()=>{window.removeEventListener(r.LocalStorageChanged.eventName,t),window.removeEventListener("storage",t)}}),[n]);const c=o.useCallback((e=>r.writeStorage(n,e)),[n]),s=o.useCallback((()=>r.deleteFromStorage(n)),[n]);return[null===t?e:t,c,s]}},9072:(n,e,t)=>{t.r(e),t.d(e,{Play:()=>ye,default:()=>ve});var r=t(5390),o=t(5493),i=t(9496),a=t(5530),c=t(4637),s=function(n,e,t){if(t||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return n.concat(r||Array.prototype.slice.call(e))},u=(0,i.createContext)({input:[],onKeyDown:function(){},onKeyUp:function(){}});function l(n){var e=n.children,t=(0,i.useState)([]),r=t[0],o=t[1],a=(0,i.useCallback)((function(n){o((function(e){return e.filter((function(e){return n!==e}))}))}),[]),l=(0,i.useCallback)((function(n){o((function(e){return e.includes(n)?e:s(s([],e,!0),[n],!1)}))}),[]);return(0,c.jsx)(u.Provider,{value:{input:r,onKeyUp:a,onKeyDown:l},children:e})}var d=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n};function f(n){return function(e){return"".concat(e.theme.zoom*n,"px")}}function p(){return(0,r.iv)(U||(U=d(["\n    filter: brightness(80%);\n  "],["\n    filter: brightness(80%);\n  "])))}var g,x=r.ZP.div($||($=d(["\n  display: flex;\n  justify-content: center;\n"],["\n  display: flex;\n  justify-content: center;\n"]))),b=r.ZP.div(I||(I=d(["\n  display: inline-block;\n  margin: 10px;\n  background: #eee;\n  border-radius: 10px 10px 60px 10px;\n  box-shadow: 5px 5px rgba(0, 0, 0, 0.1);\n  padding: ",";\n  color: ",";\n  position: relative;\n"],["\n  display: inline-block;\n  margin: 10px;\n  background: #eee;\n  border-radius: 10px 10px 60px 10px;\n  box-shadow: 5px 5px rgba(0, 0, 0, 0.1);\n  padding: ",";\n  color: ",";\n  position: relative;\n"])),f(20),"#393C81"),h=r.ZP.div(W||(W=d(["\n  background-color: #777;\n  border-radius: "," "," "," ",";\n  box-shadow: inset 0px 0px 20px 0px rgba(0, 0, 0, 0.66);\n"],["\n  background-color: #777;\n  border-radius: "," "," "," ",";\n  box-shadow: inset 0px 0px 20px 0px rgba(0, 0, 0, 0.66);\n"])),f(7),f(7),f(40),f(7)),m=r.ZP.div(K||(K=d(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: ",";\n  font-size: ",";\n  font-family: Arial;\n  color: #b3b3b3;\n  padding: 0 "," 0;\n"],["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: ",";\n  font-size: ",";\n  font-family: Arial;\n  color: #b3b3b3;\n  padding: 0 "," 0;\n"])),f(23),f(6),f(8)),w=r.ZP.div(F||(F=d(["\n  flex: 0 0 auto;\n  margin: 0 ",";\n"],["\n  flex: 0 0 auto;\n  margin: 0 ",";\n"])),f(5)),y=r.ZP.div(M||(M=d(["\n  display: flex;\n  margin-right: ",";\n  padding-bottom: ",";\n"],["\n  display: flex;\n  margin-right: ",";\n  padding-bottom: ",";\n"])),f(45),f(23)),v=r.ZP.div(V||(V=d(["\n  flex: 1 1 ",";\n  height: ",";\n  background-color: #8b1d90;\n  box-shadow: 0 "," 0 #283593;\n  margin-top: -",";\n"],["\n  flex: 1 1 ",";\n  height: ",";\n  background-color: #8b1d90;\n  box-shadow: 0 "," 0 #283593;\n  margin-top: -",";\n"])),(function(n){return n.width}),f(3),f(6),f(6)),j=r.ZP.div(H||(H=d(["\n  margin-left: auto;\n  margin-right: auto;\n  position: relative;\n"],["\n  margin-left: auto;\n  margin-right: auto;\n  position: relative;\n"]))),_=r.ZP.div(J||(J=d(["\n  position: absolute;\n  box-shadow: inset 5px 5px 5px 0px rgba(0, 0, 0, 0.6);\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n"],["\n  position: absolute;\n  box-shadow: inset 5px 5px 5px 0px rgba(0, 0, 0, 0.6);\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n"]))),A=r.ZP.div(q||(q=d(["\n  background-color: ",";\n  box-shadow: 0 0 3px 1px #ef5350;\n  height: ",";\n  width: ",";\n  border-radius: ","px;\n  margin: 10px 20px 10px 10px;\n  box-shadow: inset 0px 0px 5px 0px rgba(0, 0, 0, 0.66);\n"],["\n  background-color: ",";\n  box-shadow: 0 0 3px 1px #ef5350;\n  height: ",";\n  width: ",";\n  border-radius: ","px;\n  margin: 10px 20px 10px 10px;\n  box-shadow: inset 0px 0px 5px 0px rgba(0, 0, 0, 0.66);\n"])),(function(n){return n.enabled?"#f00":"#000"}),f(9),f(9),(function(n){return 9*n.theme.zoom/2})),S=r.ZP.div(Y||(Y=d(["\n  font-family: Arial;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  color: #b3b3b3;\n  width: ",";\n  font-size: ",";\n  margin-bottom: 80px;\n"],["\n  font-family: Arial;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  color: #b3b3b3;\n  width: ",";\n  font-size: ",";\n  margin-bottom: 80px;\n"])),f(45),f(6)),k=r.ZP.div(G||(G=d(["\n  letter-spacing: 1px;\n  font-size: ",";\n"],["\n  letter-spacing: 1px;\n  font-size: ",";\n"])),f(13)),L=r.ZP.div(X||(X=d(["\n  margin-left: ",";\n  font-size: ",";\n"],["\n  margin-left: ",";\n  font-size: ",";\n"])),f(2),f(20)),P=r.ZP.div(Q||(Q=d(["\n  font-size: ",";\n"],["\n  font-size: ",";\n"])),f(6)),C=r.ZP.div(nn||(nn=d(["\n  background-color: ",";\n  height: ",";\n  width: ",";\n  border-radius: ",";\n\n  ","\n"],["\n  background-color: ",";\n  height: ",";\n  width: ",";\n  border-radius: ",";\n\n  ","\n"])),"#8A205E",f(36),f(36),f(18),(function(n){return n.$pressed&&p()})),E=r.ZP.div(en||(en=d(["\n  position: relative;\n"],["\n  position: relative;\n"]))),T=r.ZP.div(tn||(tn=d(["\n  font-size: ",";\n  letter-spacing: ",";\n"],["\n  font-size: ",";\n  letter-spacing: ",";\n"])),f(12),f(1)),B=(0,r.ZP)(T)(rn||(rn=d(["\n  margin-top: ",";\n"],["\n  margin-top: ",";\n"])),(function(n){return f(n.$spacing)})),Z=r.ZP.div(on||(on=d(["\n  display: inline-flex;\n  margin-top: ",";\n  margin-right: -",";\n  transform: rotate(-","deg);\n  padding: ",";\n\n  background-color: #dfdfdf;\n  box-shadow: 0 0 0 5px #dfdfdf;\n  border-radius: ",";\n\n  > * + * {\n    margin-left: ",";\n  }\n\n  "," {\n    bottom: -",";\n    position: absolute;\n    left: 0;\n    right: 0;\n    text-align: center;\n  }\n"],["\n  display: inline-flex;\n  margin-top: ",";\n  margin-right: -",";\n  transform: rotate(-","deg);\n  padding: ",";\n\n  background-color: #dfdfdf;\n  box-shadow: 0 0 0 5px #dfdfdf;\n  border-radius: ",";\n\n  > * + * {\n    margin-left: ",";\n  }\n\n  "," {\n    bottom: -",";\n    position: absolute;\n    left: 0;\n    right: 0;\n    text-align: center;\n  }\n"])),f(10),f(12),25,f(5),f(36),f(18),B,f(25)),D=r.ZP.div(an||(an=d(["\n  transform: rotate(-","deg);\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  align-items: center;\n"],["\n  transform: rotate(-","deg);\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  align-items: center;\n"])),25),N=r.ZP.div(cn||(cn=d(["\n  border-radius: ",";\n  background-color: #dfdfdf;\n  padding: ",";\n"],["\n  border-radius: ",";\n  background-color: #dfdfdf;\n  padding: ",";\n"])),f(9.5),f(5)),R=r.ZP.div(sn||(sn=d(["\n  background-color: #868a8d;\n  width: ",";\n  height: ",";\n  border-radius: ",";\n  ","\n"],["\n  background-color: #868a8d;\n  width: ",";\n  height: ",";\n  border-radius: ",";\n  ","\n"])),f(38),f(9),f(4.5),(function(n){return n.$pressed&&p()})),O=r.ZP.div(un||(un=d(["\n  display: flex;\n  margin-left: ",";\n  margin-top: ",";\n  margin-bottom: ",";\n  "," + "," {\n    margin-left: ",";\n  }\n"],["\n  display: flex;\n  margin-left: ",";\n  margin-top: ",";\n  margin-bottom: ",";\n  "," + "," {\n    margin-left: ",";\n  }\n"])),f(80),f(30),f(40),D,D,f(7)),z=r.ZP.div(ln||(ln=d([""],[""])));!function(n){n[n.HORIZONTAL=0]="HORIZONTAL",n[n.VERTICAL=1]="VERTICAL"}(g||(g={}));var U,$,I,W,K,F,M,V,H,J,q,Y,G,X,Q,nn,en,tn,rn,on,an,cn,sn,un,ln,dn,fn,pn,gn,xn,bn,hn,mn,wn,yn,vn,jn,_n,An,Sn=r.ZP.div(dn||(dn=d(["\n  display: flex;\n  justify-content: center;\n"],["\n  display: flex;\n  justify-content: center;\n"]))),kn=r.ZP.div(fn||(fn=d(["\n  width: ",";\n  height: 80%;\n  background-color: #353535;\n  margin: ",";\n  border-radius: ",";\n"],["\n  width: ",";\n  height: 80%;\n  background-color: #353535;\n  margin: ",";\n  border-radius: ",";\n"])),f(2),f(2),f(5)),Ln=r.ZP.div(pn||(pn=d(["\n  position: relative;\n  height: ",";\n  width: ",";\n  background-color: #1b1d1d;\n"],["\n  position: relative;\n  height: ",";\n  width: ",";\n  background-color: #1b1d1d;\n"])),f(26),f(26)),Pn=(0,r.ZP)(Ln)(bn||(bn=d(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: ",";\n\n  "," {\n    ","\n\n    ",";\n  }\n"],["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: ",";\n\n  "," {\n    ","\n\n    ",";\n  }\n"])),(function(n){return n.$orientation===g.VERTICAL?"row":"column"}),kn,(function(n){return n.$pressed&&p()}),(function(n){return n.$orientation===g.VERTICAL?(0,r.iv)(gn||(gn=d(["\n            width: ",";\n            height: 60%;\n          "],["\n            width: ",";\n            height: 60%;\n          "])),f(3)):(0,r.iv)(xn||(xn=d(["\n            height: ",";\n            width: 60%;\n          "],["\n            height: ",";\n            width: 60%;\n          "])),f(3))})),Cn=(0,r.ZP)(Pn)(hn||(hn=d(["\n  border-radius: "," 0 0 ",";\n"],["\n  border-radius: "," 0 0 ",";\n"])),f(5),f(5)),En=(0,r.ZP)(Pn)(mn||(mn=d(["\n  border-radius: "," "," 0 0;\n"],["\n  border-radius: "," "," 0 0;\n"])),f(5),f(5)),Tn=(0,r.ZP)(Pn)(wn||(wn=d(["\n  border-radius: 0 "," "," 0;\n"],["\n  border-radius: 0 "," "," 0;\n"])),f(5),f(5)),Bn=(0,r.ZP)(Pn)(yn||(yn=d(["\n  border-radius: 0 0 "," ",";\n"],["\n  border-radius: 0 0 "," ",";\n"])),f(5),f(5)),Zn=(0,r.ZP)(Ln)(vn||(vn=d(["\n  &:before {\n    content: '';\n    position: absolute;\n    z-index: 1;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    margin: auto;\n    height: ",";\n    width: ",";\n    background-color: #353535;\n    border-radius: 100%;\n  }\n"],["\n  &:before {\n    content: '';\n    position: absolute;\n    z-index: 1;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    margin: auto;\n    height: ",";\n    width: ",";\n    background-color: #353535;\n    border-radius: 100%;\n  }\n"])),f(19),f(19)),Dn=r.ZP.div(jn||(jn=d(["\n  display: flex;\n  margin-top: ",";\n"],["\n  display: flex;\n  margin-top: ",";\n"])),f(35)),Nn=r.ZP.div(_n||(_n=d(["\n  height: ",";\n  width: ",";\n  background-color: #a7a49f;\n  border-radius: ",";\n  box-shadow: inset 0px 0px 5px 0px rgb(95 95 95 / 66%);\n"],["\n  height: ",";\n  width: ",";\n  background-color: #a7a49f;\n  border-radius: ",";\n  box-shadow: inset 0px 0px 5px 0px rgb(95 95 95 / 66%);\n"])),f(48),f(5),f(5)),Rn={Wrapper:x,Device:b,Display:h,DisplayTop:m,DisplayHeaderText:w,DisplayContent:y,DisplayLine:v,Screen:j,ScreenOverlay:_,Battery:S,BatteryIndicator:A,NintendoText:k,GameBoyText:L,TradeMarkText:P,Controls:Dn,ButtonsAB:Z,CircleButtonWrapper:E,CircleButton:C,ButtonText:B,ButtonsStartSelect:O,WideButton:R,WideButtonWrapper:N,WideButtonContainer:D,Arrows:z,ArrowsLine:Sn,ArrowUp:En,ArrowDown:Bn,ArrowLeft:Cn,ArrowRight:Tn,ArrowCenter:Zn,ArrowStripe:kn,Speakers:r.ZP.div(An||(An=d(["\n  display: inline-flex;\n  transform: rotate(-28deg);\n  position: absolute;\n  bottom: ",";\n  right: ",";\n\n  "," + "," {\n    margin-left: ",";\n  }\n"],["\n  display: inline-flex;\n  transform: rotate(-28deg);\n  position: absolute;\n  bottom: ",";\n  right: ",";\n\n  "," + "," {\n    margin-left: ",";\n  }\n"])),f(19),f(15),Nn,Nn,f(8)),Speaker:Nn};function On(n){return(0,c.jsxs)(Rn.Display,{children:[(0,c.jsxs)(Rn.DisplayTop,{children:[(0,c.jsx)(Rn.DisplayLine,{width:"25%"}),(0,c.jsx)(Rn.DisplayHeaderText,{children:"DOT MATRIX WITH STEREO SOUND"}),(0,c.jsx)(Rn.DisplayLine,{width:"12%"})]}),(0,c.jsxs)(Rn.DisplayContent,{children:[(0,c.jsxs)(Rn.Battery,{children:[(0,c.jsx)(Rn.BatteryIndicator,{enabled:n.enabled}),"BATTERY"]}),(0,c.jsxs)(Rn.Screen,{children:[n.children,(0,c.jsx)(Rn.ScreenOverlay,{})]})]})]})}var zn=t(3595),Un=160,$n=144;function In(n,e){var t=n.running,o=(0,r.Fg)().zoom,a=(0,i.useContext)(u),s=a.input,l=a.onKeyDown,d=a.onKeyUp,f=s.includes(zn.Lt.A),p=s.includes(zn.Lt.B),x=s.includes(zn.Lt.Start),b=s.includes(zn.Lt.Select),h=s.includes(zn.Lt.ArrowLeft),m=s.includes(zn.Lt.ArrowRight),w=s.includes(zn.Lt.ArrowUp),y=s.includes(zn.Lt.ArrowDown);return(0,c.jsx)(Rn.Wrapper,{children:(0,c.jsxs)(Rn.Device,{children:[(0,c.jsx)(On,{enabled:t,children:(0,c.jsx)("canvas",{ref:e,style:{display:"block",imageRendering:"pixelated",zoom:o},height:$n,width:Un})}),(0,c.jsxs)("div",{className:"flex items-baseline",children:[(0,c.jsx)(Rn.NintendoText,{className:"font-pretendo",children:"Nintendo"}),(0,c.jsx)(Rn.GameBoyText,{className:"font-gills-sans font-medium italic",children:"GAME BOY"}),(0,c.jsx)(Rn.TradeMarkText,{className:"font-bold",children:"TM"})]}),(0,c.jsxs)(Rn.Controls,{children:[(0,c.jsxs)(Rn.Arrows,{children:[(0,c.jsx)(Rn.ArrowsLine,{children:(0,c.jsxs)(Rn.ArrowUp,{onPointerDown:function(){return l(zn.Lt.ArrowUp)},onPointerUp:function(){return d(zn.Lt.ArrowUp)},$orientation:g.HORIZONTAL,$pressed:w,children:[(0,c.jsx)(Rn.ArrowStripe,{}),(0,c.jsx)(Rn.ArrowStripe,{}),(0,c.jsx)(Rn.ArrowStripe,{})]})}),(0,c.jsxs)(Rn.ArrowsLine,{children:[(0,c.jsxs)(Rn.ArrowLeft,{onPointerDown:function(){return l(zn.Lt.ArrowLeft)},onPointerUp:function(){return d(zn.Lt.ArrowLeft)},$orientation:g.VERTICAL,$pressed:h,children:[(0,c.jsx)(Rn.ArrowStripe,{}),(0,c.jsx)(Rn.ArrowStripe,{}),(0,c.jsx)(Rn.ArrowStripe,{})]}),(0,c.jsx)(Rn.ArrowCenter,{}),(0,c.jsxs)(Rn.ArrowRight,{onPointerDown:function(){return l(zn.Lt.ArrowRight)},onPointerUp:function(){return d(zn.Lt.ArrowRight)},$orientation:g.VERTICAL,$pressed:m,children:[(0,c.jsx)(Rn.ArrowStripe,{}),(0,c.jsx)(Rn.ArrowStripe,{}),(0,c.jsx)(Rn.ArrowStripe,{})]})]}),(0,c.jsx)(Rn.ArrowsLine,{children:(0,c.jsxs)(Rn.ArrowDown,{onPointerDown:function(){return l(zn.Lt.ArrowDown)},onPointerUp:function(){return d(zn.Lt.ArrowDown)},$orientation:g.HORIZONTAL,$pressed:y,children:[(0,c.jsx)(Rn.ArrowStripe,{}),(0,c.jsx)(Rn.ArrowStripe,{}),(0,c.jsx)(Rn.ArrowStripe,{})]})})]}),(0,c.jsx)("div",{className:"ml-auto",children:(0,c.jsxs)(Rn.ButtonsAB,{className:" font-nes",children:[(0,c.jsxs)(Rn.CircleButtonWrapper,{children:[(0,c.jsx)(Rn.CircleButton,{onPointerDown:function(){return l(zn.Lt.B)},onPointerUp:function(){return d(zn.Lt.B)},$pressed:p}),(0,c.jsx)(Rn.ButtonText,{$spacing:10,children:"B"})]}),(0,c.jsxs)(Rn.CircleButtonWrapper,{children:[(0,c.jsx)(Rn.CircleButton,{onPointerDown:function(){return l(zn.Lt.A)},onPointerUp:function(){return d(zn.Lt.A)},$pressed:f}),(0,c.jsx)(Rn.ButtonText,{$spacing:10,children:"A"})]})]})})]}),(0,c.jsxs)(Rn.ButtonsStartSelect,{className:"font-nes",children:[(0,c.jsxs)(Rn.WideButtonContainer,{children:[(0,c.jsx)(Rn.WideButtonWrapper,{children:(0,c.jsx)(Rn.WideButton,{onPointerDown:function(){return l(zn.Lt.Select)},onPointerUp:function(){return d(zn.Lt.Select)},$pressed:b})}),(0,c.jsx)(Rn.ButtonText,{$spacing:1,children:"SELECT"})]}),(0,c.jsxs)(Rn.WideButtonContainer,{children:[(0,c.jsx)(Rn.WideButtonWrapper,{children:(0,c.jsx)(Rn.WideButton,{onPointerDown:function(){return l(zn.Lt.Start)},onPointerUp:function(){return d(zn.Lt.Start)},$pressed:x})}),(0,c.jsx)(Rn.ButtonText,{$spacing:1,children:"START"})]})]}),(0,c.jsxs)(Rn.Speakers,{children:[(0,c.jsx)(Rn.Speaker,{}),(0,c.jsx)(Rn.Speaker,{}),(0,c.jsx)(Rn.Speaker,{}),(0,c.jsx)(Rn.Speaker,{}),(0,c.jsx)(Rn.Speaker,{}),(0,c.jsx)(Rn.Speaker,{})]})]})})}var Wn,Kn,Fn,Mn=(0,i.forwardRef)(In),Vn=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n},Hn={Icon:r.ZP.div(Wn||(Wn=Vn(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n  "],["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n  "]))),Wrapper:r.ZP.div(Kn||(Kn=Vn(["\n    font-size: ",";\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  "],["\n    font-size: ",";\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  "])),"12px"),Value:r.ZP.div(Fn||(Fn=Vn(["\n    margin: 0 5px;\n  "],["\n    margin: 0 5px;\n  "])))};function Jn(n){var e=n.zoom,t=n.onChange;return(0,c.jsxs)(Hn.Wrapper,{children:[(0,c.jsx)(Hn.Icon,{children:(0,c.jsx)("button",{type:"button",onClick:function(){return t(Math.max(1,e-.5))},children:"-"})}),(0,c.jsxs)(Hn.Value,{children:["Zoom: ",e.toFixed(1)]}),(0,c.jsx)(Hn.Icon,{children:(0,c.jsx)("button",{type:"button",onClick:function(){return t(Math.min(e+.5,5))},children:"+"})})]})}var qn,Yn,Gn,Xn=t(1571),Qn=r.ZP.div(qn||(Yn=["\n  cursor: pointer;\n"],Gn=["\n  cursor: pointer;\n"],Object.defineProperty?Object.defineProperty(Yn,"raw",{value:Gn}):Yn.raw=Gn,qn=Yn));function ne(){var n=(0,Xn.k6)();return(0,c.jsx)(Qn,{onClick:function(){return n.goBack()},children:"←"})}function ee(n,e,t){if(void 0===t&&(t=1),t>0&&n>=e||t<0&&n<=e)return[];for(var r=[],o=n;t>0?o<e:o>e;o+=t)r.push(o);return r}var te=t(3419).y.filter((function(n){return["demos/cgb-acid2.gbc","demos/dmg-acid2.gb","demos/gejmboj.gb","demos/oh.gb","demos/opus5.gb","demos/pocket.gb"].includes(n.name)})),re=te.find((function(n){return"demos/oh.gb"===n.name}))||null;function oe(n){var e=(0,i.useCallback)((function(e){var t;e&&(t=e.url,fetch(t).then((function(n){return n.arrayBuffer()})).then((function(n){return new Uint8Array(n)}))).then((function(t){return n.onCartridgeLoad({name:e.name,bytes:t})}))}),[]);return(0,i.useEffect)((function(){e(re)}),[e]),(0,c.jsx)("table",{children:(0,c.jsx)("tbody",{children:te.map((function(t){return(0,c.jsxs)("tr",{className:n.selectedName===t.name?"font-medium underline":"",children:[(0,c.jsx)("td",{className:"px-1",children:t.name}),(0,c.jsx)("td",{className:"px-1",children:(0,c.jsx)("button",{type:"button",onClick:function(){return e(t)},children:"Load"})})]},t.url)}))})})}function ie(n){var e=n.onLoad,t=n.className,r=n.children;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("input",{onChange:function(n){var t=n.currentTarget.files;if(t){var r=t[0];r.arrayBuffer().then((function(n){return new Uint8Array(n)})).then((function(n){return e({name:"Custom: ".concat(r.name),bytes:n,custom:!0})}))}},accept:".gb,.gbc",style:{display:"none"},id:"file",multiple:!0,type:"file"}),(0,c.jsx)("label",{className:t,htmlFor:"file",children:r})]})}var ae,ce,se={ArrowDown:zn.Lt.ArrowDown,ArrowUp:zn.Lt.ArrowUp,ArrowLeft:zn.Lt.ArrowLeft,ArrowRight:zn.Lt.ArrowRight,KeyD:zn.Lt.ArrowRight,KeyA:zn.Lt.ArrowLeft,KeyW:zn.Lt.ArrowUp,KeyS:zn.Lt.ArrowDown,KeyJ:zn.Lt.A,KeyX:zn.Lt.A,KeyK:zn.Lt.B,KeyC:zn.Lt.B,KeyB:zn.Lt.Start,KeyN:zn.Lt.Select},ue=t(2924),le=t(3013),de=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n},fe=r.ZP.span(ae||(ae=de(["\n  font-size: ","px;\n"],["\n  font-size: ","px;\n"])),12),pe=r.ZP.canvas(ce||(ce=de(["\n  display: inline-block;\n"],["\n  display: inline-block;\n"]))),ge=[];function xe(){var n=(0,i.useRef)(window.performance.now()),e=(0,i.useRef)(null),t=(0,i.useRef)(0);return(0,i.useEffect)((function(){return function r(){t.current=window.requestAnimationFrame((function(){var t,o=window.performance.now(),i=o-n.current;n.current=o;var a=Math.round(1e3/i);ge.push(a),ge.length>64&&ge.shift();var c=Math.round(ge.reduce((function(n,e){return n+e}))/ge.length),s=null===(t=e.current)||void 0===t?void 0:t.getContext("2d");s&&(s.clearRect(0,0,30,20),s.textBaseline="middle",s.font="12px Arial",s.fillText(c.toString(),1,11)),r()}))}(),function(){return window.cancelAnimationFrame(t.current)}}),[]),(0,c.jsxs)(fe,{className:"flex items-center justify-end",children:["Average FPS:"," ",(0,c.jsx)(pe,{width:30,height:20,ref:e})]})}var be=!1,he=new AudioContext({sampleRate:44100});function me(n){n.fillStyle="#6D7C00",n.fillRect(0,0,Un,$n)}function we(n){var e,t,r,o,a,c=n.bytes,s=n.wasmModule,l=n.running,d=n.ctx,f=n.soundEnabled,p=(0,i.useRef)(),g=(0,i.useRef)(0),x=(0,i.useRef)(0),b=(e=(0,i.useContext)(u),t=e.onKeyDown,r=e.onKeyUp,o=e.input,a=(0,i.useRef)(),(0,i.useEffect)((function(){Object.values(se).forEach((function(n){var e,t;o.includes(n)?null===(e=a.current)||void 0===e||e.on_key_down(n):null===(t=a.current)||void 0===t||t.on_key_up(n)}))}),[o]),(0,i.useEffect)((function(){var n=function(n){var e=se[n.code];void 0!==e&&t(e)},e=function(n){var e=se[n.code];void 0!==e&&r(e)};return window.addEventListener("keydown",n),window.addEventListener("keyup",e),function(){window.removeEventListener("keydown",n),window.removeEventListener("keyup",e)}}),[]),(0,i.useCallback)((function(n){a.current=n}),[]));(0,i.useEffect)((function(){me(d)}),[d]);var h=(0,i.useCallback)((function(n){for(var e=s.get_audio_buffer_size(),t=new Float32Array(le.memory.buffer,n,e),r=t.length/2,o=he.createBuffer(2,r,he.sampleRate),i=0;i<2;i+=1)for(var a=o.getChannelData(i),c=0;c<r;c+=1)a[c]=t[2*c+i];var u=he.createBufferSource();u.buffer=o,u.connect(he.destination),g.current<=he.currentTime+.02&&(g.current=he.currentTime+.06),u.start(g.current),g.current+=e/2/he.sampleRate}),[]);return(0,i.useEffect)((function(){if(c){var n=new s.WebCartridge(c);g.current=0,p.current=new s.WebEmulator(n,(function(){})),me(d),b(p.current)}}),[c,s,b]),(0,i.useEffect)((function(){var n=p.current;n&&n.set_audio_buffer_callback(f?h:function(){})}),[p.current,f,h]),(0,i.useEffect)((function(){var n=p.current;if(n)if(l){var e=function(){n.run_frame(),function(n,e){var t=n.get_canvas_data_pointer(),r=e.createImageData(Un,$n),o=new Uint8Array(le.memory.buffer,t,69120);ee(0,$n).forEach((function(n){ee(0,Un).forEach((function(e){var t=3*(n*Un+e),i=4*(n*Un+e);r.data[i]=o[t],r.data[i+1]=o[t+1],r.data[i+2]=o[t+2],r.data[i+3]=255}))})),e.putImageData(r,0,0)}(n,d),x.current=window.requestAnimationFrame(e)};e()}else window.cancelAnimationFrame(x.current)}),[l]),null}function ye(){var n=(0,o._)("zoom",1.5),e=n[0],s=n[1],u=(0,o._)("sound_enabled",!1),d=u[0],f=u[1],p=(0,i.useState)(!1),g=p[0],x=p[1],b=(0,i.useState)(),h=b[0],m=b[1],w=(0,i.useState)(null),y=w[0],v=w[1],j={zoom:e},_=function(){var n=(0,i.useState)(null),e=n[0],r=n[1];return(0,i.useEffect)((function(){t.e(670).then(t.bind(t,2670)).then((function(n){n.init(),r(n)})).catch(console.error)}),[]),e}(),A=(0,i.useCallback)((function(n){n&&m((function(e){return e||(n.getContext("2d")||e)}))}),[]),S=function(n){x(!1),v(n)};return _?(0,c.jsx)("div",{className:"select-none",children:(0,c.jsx)(l,{children:(0,c.jsxs)(r.f6,{theme:j,children:[(0,c.jsxs)("div",{className:"grid grid-cols-3 justify-between items-center mx-2 pt-2",children:[(0,c.jsx)(ne,{}),(0,c.jsx)(Jn,{zoom:e,onChange:s}),(0,c.jsx)("div",{className:"justify-end",children:(0,c.jsx)(xe,{})})]}),(0,c.jsx)(Mn,{running:g,ref:A}),h&&(0,c.jsx)(we,{bytes:null==y?void 0:y.bytes,wasmModule:_,running:g,soundEnabled:d,ctx:h}),(0,c.jsxs)("div",{className:"mt-2 flex justify-center items-center text-xs",children:[(0,c.jsx)("button",{className:"mx-2 border rounded px-1 py-1",type:"button",onClick:function(){!function(n){if(!be){be=!0;var e=n.createBuffer(1,1,n.sampleRate),t=n.createBufferSource();t.buffer=e,t.connect(n.destination),t.start(0),n.resume()}}(he),x((function(n){return!n&&!(n||!y)}))},children:g?"Stop":"Run"}),(0,c.jsx)(ie,{className:"mx-2 border rounded px-1 py-1",onLoad:S,children:"Upload ROM"}),(0,c.jsxs)("label",{className:"flex justify-center items-center",htmlFor:"soundEnableCheckbox",children:[(0,c.jsx)("input",{id:"soundEnableCheckbox",className:"mr-1",type:"checkbox",checked:d,onChange:function(n){return f(n.currentTarget.checked)}}),"Enable sound"]})]}),(null==y?void 0:y.custom)&&(0,c.jsx)("div",{className:"mt-2 flex justify-center text-xs",children:y.name}),(0,c.jsx)("div",{className:"mt-2 flex justify-center text-xs",children:(0,c.jsx)(oe,{selectedName:null==y?void 0:y.name,onCartridgeLoad:S})}),(0,c.jsx)("div",{className:"mt-2 flex text-center justify-center text-xs",children:(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{children:"Select one of the available demos or upload your custom *.gb file and press Run"}),(0,c.jsxs)("p",{children:["The test ROMs are available in"," ",(0,c.jsx)(a.rU,{className:"underline",to:"/debug",children:"debug mode"}),". You can see the test results"," ",(0,c.jsx)(a.rU,{className:"underline",to:"/test-results",children:"here"}),"."]})]})})]})})}):(0,c.jsx)(ue.l,{})}const ve=ye},3419:(n,e,t)=>{t.d(e,{y:()=>r});var r=[{name:"demos/CI5.gbc",url:t.p+"5a60931f91360525cc92ac83ff9d353f.gbc"},{name:"demos/cgb-acid2.gbc",url:t.p+"26cd22abc92816c0e20290891808fc41.gbc"},{name:"demos/dmg-acid2.gb",url:t.p+"14f9da3508d034883a3725195d74af75.gb"},{name:"demos/firstwhite.gb",url:t.p+"eecbffb962d1d105cb0234e7c13c6275.gb"},{name:"demos/gejmboj.gb",url:t.p+"ff80b6f5a35c465e3ba709af42967d06.gb"},{name:"demos/lyc.gb",url:t.p+"f6d975ea9196cc1c36c1928c9f681761.gb"},{name:"demos/numism.gb",url:t.p+"f95640fc394c6883db2c047ec997da84.gb"},{name:"demos/oh.gb",url:t.p+"657174485b9523ededc4d774eab76cbf.gb"},{name:"demos/opus5.gb",url:t.p+"e2361cd5a8e619b0b8638e5a1588b9dc.gb"},{name:"demos/pocket.gb",url:t.p+"1096465e3ab6cff920824f1ae206a59e.gb"},{name:"demos/pokemon-tv-opening.gbc",url:t.p+"d365f9a6b6d7393b6a659701b01d4e79.gbc"}]},3013:(n,e,t)=>{var r=t.w[n.id];n.exports=r,t(3595),r[""]()}}]);